<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Valentine üíõ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
    }

    body {
      background: white;
      overflow: hidden;
    }

    /* CENTER CONTENT */
    .content {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      pointer-events: none; /* lets NO move freely */
    }

    .content * {
      pointer-events: auto;
    }

    img {
      max-width: 220px;
      max-height: 35vh;
      margin-bottom: 20px;
    }

    h1 {
      margin-bottom: 25px;
      padding: 0 20px;
    }

    #yesBtn {
      padding: 12px 24px;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    /* FULLSCREEN PLAYGROUND */
    .playground {
      position: fixed;
      inset: 0;
    }

    #noBtn {
      position: absolute;
      padding: 12px 24px;
      font-size: 1rem;
      cursor: pointer;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-6px); }
      100% { transform: translateX(0); }
    }

    .shake {
      animation: shake 0.4s;
    }

    .confirm {
      position: fixed;
      inset: 0;
      background: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
  </style>
</head>

<body>

  <!-- CENTER CONTENT -->
  <div class="content">
    <!-- Replace with your own GIF file if you want -->
    <img src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" alt="Minion love">

    <h1 id="question">
      Will you be my Valentine,<br>
      <strong>Mabbyyy?</strong>
    </h1>

    <button id="yesBtn">Yes üíñ</button>
  </div>

  <!-- FULLSCREEN INTERACTION LAYER -->
  <div class="playground">
    <button id="noBtn">No üôÉ</button>
  </div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const question = document.getElementById("question");
    const playground = document.querySelector(".playground");

    let scale = 1;
    let noCount = 0;
    let showedConfirm = false;

    const SAFE_MARGIN = 20;

    const messages = [
      "Hmm‚Ä¶ misclick?",
      "That didn‚Äôt feel right.",
      "Are you playing hard to get?",
      "Bold choice.",
      "This button is struggling.",
      "Your finger slipped again.",
      "We both know where this is going.",
      "Stop resisting.",
      "The NO button is tired.",
      "YES is inevitable."
    ];

    function moveNoButton() {
      const pw = playground.clientWidth;
      const ph = playground.clientHeight;
      const bw = noBtn.offsetWidth;
      const bh = noBtn.offsetHeight;

      const x = Math.random() * (pw - bw - SAFE_MARGIN * 2) + SAFE_MARGIN;
      const y = Math.random() * (ph - bh - SAFE_MARGIN * 2) + SAFE_MARGIN;

      noBtn.style.left = `${x}px`;
      noBtn.style.top = `${y}px`;
    }

    // Initial position
    moveNoButton();

    function handleNoAttempt() {
      noCount++;

      const index = Math.min(noCount - 1, messages.length - 1);
      question.innerText = messages[index];

      question.classList.remove("shake");
      void question.offsetWidth;
      question.classList.add("shake");

      scale += 0.3;
      yesBtn.style.transform = `scale(${scale})`;

      moveNoButton();

      if (noCount === 5 && !showedConfirm) {
        showedConfirm = true;
        showConfirmScreen();
      }

      if (scale >= 4) {
        yesBtn.style.position = "fixed";
        yesBtn.style.inset = "0";
        yesBtn.style.width = "100vw";
        yesBtn.style.height = "100vh";
        yesBtn.style.fontSize = "2.5rem";
        noBtn.style.display = "none";
      }
    }

    function showConfirmScreen() {
      const confirmDiv = document.createElement("div");
      confirmDiv.className = "confirm";
      confirmDiv.innerHTML = `
        <h1>Are you sure? ü•∫</h1>
        <button id="backBtn">Go back</button>
      `;
      document.body.appendChild(confirmDiv);

      document.getElementById("backBtn").onclick = () => {
        confirmDiv.remove();
      };
    }

    noBtn.addEventListener("mouseenter", handleNoAttempt);
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      handleNoAttempt();
    });

    yesBtn.addEventListener("click", () => {
      confetti({ particleCount: 200, spread: 100 });

      document.body.innerHTML = `
        <h1 style="text-align:center;">
          YAY!!! üíï<br><br>
          You tried to say no ${noCount} times üòè<br><br>
          Happy Valentine‚Äôs Day üíñ
        </h1>
      `;
    });

    window.addEventListener("resize", moveNoButton);
  </script>

</body>
</html>
